 ![alt text](imgs/02-001.png)

 # 一致性
 - 强一致性：这种一致性级别是最符合用户直觉的，它要求系统写入什么，读出来的也会是什么，用户体验好，但实现起来往往对系统的性能影响大
 - 弱一致性：这种一致性级别约束了系统在写入成功后，不承诺立即可以读到写入的值，也不承诺多久之后数据能够达到一致，但会尽可能地保证到某个时间级别（比如秒级别）后，数据能够达到一致状态
 - 最终一致性：最终一致性是弱一致性的一个特例，系统会保证在一定时间内，能够达到一个数据一致的状态。这里之所以将最终一致性单独提出来，是因为它是弱一致性中非常推崇的一种一致性模型，也是业界在大型分布式系统的数据一致性上比较推崇的模型

 # 三个经典的缓存模式

 ## Cache-Aside Pattern（旁路缓存模式）

### 读的流程
 ![alt text](imgs/02-002.png)

 ### 写的流程

 ![alt text](imgs/02-003.png)


 ## Read-Through/Write-Through（读写穿透）
 
 ### 读的流程

 ![alt text](imgs/02-004.png)

 ### 写的流程

 ![alt text](imgs/02-005.png)


## Write behind （异步缓存写入）

Write behind跟Read-Through/Write-Through有相似的地方，都是由Cache Provider来负责缓存和数据库的读写。它两又有个很大的不同：Read/Write Through是同步更新缓存和数据的，Write Behind则是只更新缓存，不直接更新数据库，通过批量异步的方式来更新数据库。

 ![alt text](imgs/02-006.png)

这种方式下，缓存和数据库的一致性不强，对一致性要求高的系统要谨慎使用。但是它适合频繁写的场景，MySQL的InnoDB Buffer Pool机制就使用到这种模式。


https://juejin.cn/post/6964531365643550751